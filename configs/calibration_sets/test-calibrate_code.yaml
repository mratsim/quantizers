calibration_set:
  max_seq_length: 8192
  shuffle: true
  seed: 42
  datasets:
    # Original datasets with streaming support for fast loading
    - dataset: deepmind/code_contests
      split: valid
      columns: ["name"]
      formatter: deepmind_code_contests
      num_samples: 3

    - dataset: nvidia/OpenCodeInstruct
      split: train
      columns: ["input", "output"]
      formatter: prompt_answer
      num_samples: 3
      streaming: true

    - dataset: CSJianYang/CodeArena
      split: test
      columns: ["messages"]
      formatter: chat_completion
      num_samples: 3

    - dataset: nvidia/Llama-Nemotron-Post-Training-Dataset
      split: code
      columns: ["input"]
      formatter: chat_completion
      num_samples: 1
      streaming: true

    # Stack Rust dataset with code explanation
    - dataset: ammarnasr/the-stack-rust-clean
      split: train
      columns: ["content"]
      formatter: raw_text
      num_samples: 5
      formatter_params:
        prefix: "explain this code"

    # Humaneval Rust datasets with static language selection
    - dataset: diversoailab/humaneval-rust
      split: test
      columns: ["prompt"]
      formatter: raw_text
      num_samples: 3
      formatter_params:
        prefix: "Solve the following problem using Python"

    - dataset: diversoailab/humaneval-rust
      split: test
      columns: ["prompt"]
      formatter: raw_text
      num_samples: 3
      formatter_params:
        prefix: "Solve the following problem using JavaScript"

    - dataset: diversoailab/humaneval-rust
      split: test
      columns: ["prompt"]
      formatter: raw_text
      num_samples: 3
      formatter_params:
        prefix: "Solve the following problem using Java"

    # Humaneval Rust with Jinja templating for diverse language selection
    - dataset: diversoailab/humaneval-rust
      split: test
      columns: ["prompt"]
      formatter: raw_text
      num_samples: 10
      formatter_params:
        # Randomly select from 60 programming languages using the row's hash for consistency
        prefix: "Solve the following problem using {{ ['Zephyr', 'Prolog', 'Cobol', 'Apex', 'Crystal', 'Fortran', 'Nim', 'Delphi', 'Ada', 'Objective-C', 'VBA', 'Perl', 'Groovy', 'MATLAB', 'Solidity', 'Visual Basic', 'MicroPython', 'OCaml', 'Erlang', 'Julia', 'Lisp', 'F#', 'Clojure', 'GDScript', 'Scala', 'R', 'Haskell', 'Ruby', 'Elixir', 'x86-64 ASM', 'ARM-64 ASM', 'Assembly', 'Lua', 'Zig', 'Dart', 'Swift', 'Metal', 'PowerShell', 'PHP', 'Kotlin', 'C', 'Java', 'C++', 'C#', 'Bash/Shell', 'Go', 'Rust', 'TypeScript', 'HTML/CSS', 'SQL', 'JavaScript', 'Python', 'Lean', 'Coq', 'SML', 'Agda', 'Idris', 'Racket', 'CUDA', 'Vulkan'][hash(row|string) % 60] }}"

    # MathArena Euler problems with Jinja templating for diverse language selection
    - dataset: MathArena/project_euler
      split: train
      columns: ["problem"]
      formatter: raw_text
      num_samples: 10
      formatter_params:
        # Randomly select from 60 programming languages using the row's hash for consistency
        prefix: "Solve the following problem using {{ ['Zephyr', 'Prolog', 'Cobol', 'Apex', 'Crystal', 'Fortran', 'Nim', 'Delphi', 'Ada', 'Objective-C', 'VBA', 'Perl', 'Groovy', 'MATLAB', 'Solidity', 'Visual Basic', 'MicroPython', 'OCaml', 'Erlang', 'Julia', 'Lisp', 'F#', 'Clojure', 'GDScript', 'Scala', 'R', 'Haskell', 'Ruby', 'Elixir', 'x86-64 ASM', 'ARM-64 ASM', 'Assembly', 'Lua', 'Zig', 'Dart', 'Swift', 'Metal', 'PowerShell', 'PHP', 'Kotlin', 'C', 'Java', 'C++', 'C#', 'Bash/Shell', 'Go', 'Rust', 'TypeScript', 'HTML/CSS', 'SQL', 'JavaScript', 'Python', 'Lean', 'Coq', 'SML', 'Agda', 'Idris', 'Racket', 'CUDA', 'Vulkan'][hash(row|string) % 60] }}"
